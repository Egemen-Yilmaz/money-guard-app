import{u as S,a as M,d as b,e as N,j as e,f as A,b as E,N as C,h as P,t as z,i as F,k as G,m as R,O as T,n as I}from"./index-Bi8L1Rv0.js";import{r as U,F as W,D as H,a as V,T as K,b as X}from"./index-Dfk1agOO.js";import{I as y}from"./Icon-CZMFfH0m.js";import{C as L}from"./CurrencyTab-BuLu1741.js";import{C as J}from"./Chart-DppawQbY.js";import{u as Q,o as Y,C as k,c as Z,a as g,d as ee,e as ae}from"./index.esm-C34Lp5sr.js";const ne="_header_1fkma_4",se="_logoContainer_1fkma_22",te="_logoIcon_1fkma_30",oe="_logoText_1fkma_36",ce="_userSection_1fkma_46",ie="_userName_1fkma_53",re="_exitButton_1fkma_62",le="_exitText_1fkma_78",de="_overlay_1fkma_120",me="_modalCard_1fkma_135",ue="_modalLogoContainer_1fkma_144",_e="_confirmText_1fkma_148",he="_buttonGroup_1fkma_157",xe="_btnPrimary_1fkma_165",pe="_btnSecondary_1fkma_165",ve="_modalLogoText_1fkma_215",r={header:ne,logoContainer:se,logoIcon:te,logoText:oe,userSection:ce,userName:ie,exitButton:re,exitText:le,overlay:de,modalCard:me,modalLogoContainer:ue,confirmText:_e,buttonGroup:he,btnPrimary:xe,btnSecondary:pe,modalLogoText:ve};function be(){const n=S(),d=M(),[l,t]=b.useState(!1),c=N(s=>s.auth.user?.email),_=c?c.split("@")[0]:"User",p=async()=>{try{await n(A())}catch(s){E(`Çıkış yapılırken bir hata oluştu: ${s}`)}finally{t(!1),d("/login")}},v=s=>{s.target===s.currentTarget&&t(!1)};return b.useEffect(()=>{if(!l)return;const s=m=>{m.key==="Escape"&&t(!1)};return document.body.style.overflow="hidden",window.addEventListener("keydown",s),()=>{document.body.style.overflow="auto",window.removeEventListener("keydown",s)}},[l]),e.jsxs("header",{className:r.header,children:[e.jsxs("div",{className:r.logoContainer,children:[e.jsx("div",{className:r.logoIcon,children:e.jsx(y,{name:"icon-icon-logo",width:28,height:28})}),e.jsx("h2",{className:r.logoText,children:"Money Guard"})]}),e.jsxs("div",{className:r.userSection,children:[e.jsx("span",{className:r.userName,children:_}),e.jsxs("button",{onClick:()=>t(!0),className:r.exitButton,"aria-label":"Exit",children:[e.jsx(y,{name:"icon-icon-exit",width:24,height:24}),e.jsx("span",{className:r.exitText,children:"Exit"})]})]}),l&&U.createPortal(e.jsx("div",{className:r.overlay,onClick:v,children:e.jsxs("div",{className:r.modalCard,children:[e.jsxs("div",{className:r.modalLogoContainer,children:[e.jsx(y,{name:"icon-icon-logo",width:36,height:36}),e.jsx("h2",{className:r.modalLogoText,children:"Money Guard"})]}),e.jsx("p",{className:r.confirmText,children:"Are you sure you want to log out?"}),e.jsxs("div",{className:r.buttonGroup,children:[e.jsx("button",{onClick:p,className:r.btnPrimary,children:"LOGOUT"}),e.jsx("button",{onClick:()=>t(!1),className:r.btnSecondary,children:"CANCEL"})]})]})}),document.body)]})}const ye="_navButton_134zu_5",ge="_navContainer_134zu_13",je="_navList_134zu_19",Ne="_navItem_134zu_32",fe="_active_134zu_52",Ce="_navIcon_134zu_57",Se="_navText_134zu_75",Te="_mobileOnly_134zu_128",i={navButton:ye,navContainer:ge,navList:je,navItem:Ne,active:fe,navIcon:Ce,navText:Se,mobileOnly:Te},Ie=()=>e.jsx("nav",{className:i.navContainer,children:e.jsxs("ul",{className:i.navList,children:[e.jsx("li",{className:i.navItem,children:e.jsxs(C,{to:"/home",className:({isActive:n})=>`${i.navButton} ${n?i.active:""}`,end:!0,children:[e.jsx(y,{name:"icon-icon-home",className:i.navIcon}),e.jsx("span",{className:i.navText,children:"Home"})]})}),e.jsx("li",{className:i.navItem,children:e.jsxs(C,{to:"/statistics",className:({isActive:n})=>`${i.navButton} ${n?i.active:""}`,children:[e.jsx(y,{name:"icon-icon-statistics",className:i.navIcon}),e.jsx("span",{className:i.navText,children:"Statistics"})]})}),e.jsx("li",{className:`${i.navItem} ${i.mobileOnly}`,children:e.jsx(C,{to:"/currency",className:({isActive:n})=>`${i.navButton} ${n?i.active:""}`,children:e.jsx(y,{name:"icon-icon-currency",className:i.navIcon})})})]})}),Le="_balanceCard_6zwl8_3",ke="_title_6zwl8_25",we="_value_6zwl8_51",Ee="_negative_6zwl8_65",$e="_loading_6zwl8_69",j={balanceCard:Le,title:ke,value:we,negative:Ee,loading:$e},Be=()=>{const n=N(c=>c.auth?.user?.balance||0);if(N(c=>c.global?.isLoading||!1))return e.jsx("div",{className:j.loading,children:"Balance is loading..."});const l=n<0,t=Math.abs(n).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});return e.jsxs("div",{className:j.balanceCard,children:[e.jsx("h3",{className:j.title,children:"Balance"}),e.jsxs("div",{className:`${j.value} ${l?j.negative:""}`,children:[l?"-":"",t," €"]})]})},Oe="_container_a672a_1",qe="_header_a672a_6",De="_placeholder_a672a_16",Me="_selected_a672a_21",Ae="_chevron_a672a_26",Pe="_open_a672a_32",ze="_dropdown_a672a_36",Fe="_option_a672a_71",x={container:Oe,header:qe,placeholder:De,selected:Me,chevron:Ae,open:Pe,dropdown:ze,option:Fe},Ge=({value:n,onChange:d,options:l,placeholder:t})=>{const[c,_]=b.useState(!1),p=b.useRef(null);b.useEffect(()=>{const s=m=>{p.current&&!p.current.contains(m.target)&&_(!1)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]);const v=s=>{d(s),_(!1)};return e.jsxs("div",{className:x.container,ref:p,children:[e.jsxs("div",{className:x.header,onClick:()=>_(!c),children:[e.jsx("span",{className:n?x.selected:x.placeholder,children:n||t}),e.jsx(W,{className:`${x.chevron} ${c?x.open:""}`})]}),c&&e.jsx("div",{className:x.dropdown,children:l.map(s=>e.jsx("div",{className:x.option,onClick:()=>v(s),children:s},s))})]})},Re="_container_1uyib_1",Ue="_title_1uyib_8",We="_form_1uyib_17",He="_submitButton_1uyib_18",Ve="_cancelButton_1uyib_18",Ke="_toggleContainer_1uyib_20",Xe="_activeLabelIncome_1uyib_27",Je="_activeLabelExpense_1uyib_33",Qe="_inactiveLabel_1uyib_39",Ye="_slider_1uyib_58",Ze="_sliderIcon_1uyib_97",ea="_row_1uyib_123",aa="_field_1uyib_136",na="_input_1uyib_141",sa="_amountInput_1uyib_162",ta="_dateInput_1uyib_172",oa="_error_1uyib_176",ca="_dateWrapper_1uyib_184",ia="_calendarIcon_1uyib_189",ra="_actions_1uyib_199",a={container:Re,title:Ue,form:We,submitButton:He,cancelButton:Ve,toggleContainer:Ke,activeLabelIncome:Xe,activeLabelExpense:Je,inactiveLabel:Qe,switch:"_switch_1uyib_45",slider:Ye,sliderIcon:Ze,row:ea,field:aa,input:na,amountInput:sa,dateInput:ta,error:oa,dateWrapper:ca,calendarIcon:ia,actions:ra},la=Z().shape({type:g().oneOf(["income","expense"]).required(),amount:ae().transform(n=>Number.isNaN(n)?null:n).nullable().required("Amount is required").positive("Must be positive"),date:ee().required("Date is required"),category:g().when("type",{is:"expense",then:()=>g().required("Category is required"),otherwise:()=>g().notRequired()}),comment:g().required("Comment is required")}),da=["Main expenses","Products","Car","Self care","Child care","Household products","Education","Leisure","Other expenses","Entertainment"],ma=({onClose:n})=>{const d=S(),l=N(o=>o.transactions?.categories||[]),[t,c]=b.useState(!0),{register:_,handleSubmit:p,control:v,setValue:s,formState:{errors:m}}=Q({resolver:Y(la),defaultValues:{type:"expense",amount:"",date:new Date,category:"",comment:""}}),$=()=>{const o=t?"income":"expense";c(!t),s("type",o),o==="income"&&s("category","")},B=async o=>{try{const h=l.find(D=>D.name===o.category),O=h?h.id:"063f1132-ba5d-42b4-951d-44011ca46262",f=o.type==="expense",q={transactionDate:new Date(o.date.getTime()-o.date.getTimezoneOffset()*6e4).toISOString().split("T")[0],type:f?"EXPENSE":"INCOME",categoryId:f?O:"063f1132-ba5d-42b4-951d-44011ca46262",comment:o.comment,amount:f?-Math.abs(o.amount):Math.abs(o.amount)};await d(P(q)).unwrap(),z("Transaction added successfully!"),d(F()),d(G()),n()}catch(h){console.error("Failed to add transaction:",h),E(h?.message||"Error adding transaction")}};return e.jsxs("div",{className:a.container,children:[e.jsx("h2",{className:a.title,children:"Add transaction"}),e.jsxs("div",{className:a.toggleContainer,children:[e.jsx("span",{className:t?a.inactiveLabel:a.activeLabelIncome,children:"Income"}),e.jsxs("label",{className:a.switch,children:[e.jsx("input",{type:"checkbox",checked:t,onChange:$}),e.jsx("span",{className:a.slider,children:e.jsx("span",{className:a.sliderIcon,children:t?"-":"+"})})]}),e.jsx("span",{className:t?a.activeLabelExpense:a.inactiveLabel,children:"Expense"})]}),e.jsxs("form",{onSubmit:p(B),className:a.form,children:[t&&e.jsxs("div",{className:a.field,children:[e.jsx(k,{control:v,name:"category",render:({field:o})=>e.jsx(Ge,{value:o.value,onChange:o.onChange,options:l.length>0?l.map(h=>h.name):da,placeholder:"Select a category"})}),m.category&&e.jsx("span",{className:a.error,children:m.category.message})]}),e.jsxs("div",{className:a.row,children:[e.jsxs("div",{className:a.field,children:[e.jsx("input",{type:"number",step:"0.01",placeholder:"0.00",..._("amount"),className:`${a.input} ${a.amountInput}`}),m.amount&&e.jsx("span",{className:a.error,children:m.amount.message})]}),e.jsxs("div",{className:a.field,children:[e.jsx(k,{control:v,name:"date",render:({field:o})=>e.jsxs("div",{className:a.dateWrapper,children:[e.jsx(H,{selected:o.value,onChange:h=>o.onChange(h),dateFormat:"dd.MM.yyyy",className:`${a.input} ${a.dateInput}`}),e.jsx(V,{className:a.calendarIcon})]})}),m.date&&e.jsx("span",{className:a.error,children:m.date.message})]})]}),e.jsxs("div",{className:a.field,children:[e.jsx("input",{type:"text",placeholder:"Comment",..._("comment"),className:a.input}),m.comment&&e.jsx("span",{className:a.error,children:m.comment.message})]}),e.jsxs("div",{className:a.actions,children:[e.jsx("button",{type:"submit",className:a.submitButton,children:"ADD"}),e.jsx("button",{type:"button",onClick:n,className:a.cancelButton,children:"CANCEL"})]})]})]})},ua=({isOpen:n,onClose:d})=>n?e.jsx(K,{onClose:d,children:e.jsx(ma,{onClose:d})}):null,_a="_button_xsctq_2",ha="_icon_xsctq_27",w={button:_a,icon:ha},xa=({onClick:n})=>e.jsx("button",{className:w.button,onClick:n,"aria-label":"Add transaction",type:"button",children:e.jsx(X,{className:w.icon})}),pa="_dashboardPage_1hsq5_1",va="_container_1hsq5_22",ba="_currencySectionTablet_1hsq5_33",ya="_currencySectionDesktop_1hsq5_34",ga="_chartSectionTablet_1hsq5_35",ja="_leftSidebar_1hsq5_40",Na="_navSection_1hsq5_53",fa="_balanceSection_1hsq5_57",Ca="_main_1hsq5_62",Sa="_statisticsMode_1hsq5_120",Ta="_statsArea_1hsq5_190",u={dashboardPage:pa,container:va,currencySectionTablet:ba,currencySectionDesktop:ya,chartSectionTablet:ga,leftSidebar:ja,navSection:Na,balanceSection:fa,main:Ca,statisticsMode:Sa,statsArea:Ta},Oa=()=>{const n=S(),d=R(),l=N(_=>_.transactions?.isModalOpen||!1),t=()=>{n(I())},c=d.pathname.includes("/statistics");return e.jsxs("div",{className:u.dashboardPage,children:[e.jsx(be,{}),e.jsxs("div",{className:`${u.container} ${c?u.statisticsMode:""}`,children:[e.jsxs("aside",{className:u.leftSidebar,children:[e.jsx("div",{className:u.navSection,children:e.jsx(Ie,{})}),e.jsx("div",{className:u.balanceSection,children:e.jsx(Be,{})}),c&&e.jsx("div",{className:u.chartSectionTablet,children:e.jsx(J,{})}),e.jsx("div",{className:u.currencySectionDesktop,children:e.jsx(L,{})})]}),!c&&e.jsx("div",{className:u.currencySectionTablet,children:e.jsx(L,{})}),c?e.jsx("div",{className:u.statsArea,children:e.jsx(T,{})}):e.jsxs("main",{className:u.main,children:[e.jsx(T,{})," "]})]}),e.jsx(xa,{onClick:t}),e.jsx(ua,{isOpen:l,onClose:()=>n(I())})]})};export{Oa as default};
